{% extends 'layout.html' %}
{% block title %}
    View Ad Request
{% endblock %}
{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">Ad Request Details</h1>
    <dl class="row">
        <dt class="col-sm-3">Campaign</dt>
        <dd class="col-sm-9">{{ campaign }}</dd>

        <dt class="col-sm-3">Sponsor</dt>
        <dd class="col-sm-9">{{ sponsor }}</dd>

        <dt class="col-sm-3">Influencer</dt>
        <dd class="col-sm-9">{{ influencer }}</dd>

        <dt class="col-sm-3">Sponsor Negotiation Amount</dt>
        <dd class="col-sm-9">{{sponsor_negotiation_amount if sponsor_negotiation_amount else 'N/A' }}</dd>

        <dt class="col-sm-3">Influencer Negotiation Amount</dt>
        <dd class="col-sm-9">{{influencer_negotiation_amount if influencer_negotiation_amount else 'N/A' }}</dd>

        <dt class="col-sm-3">Status</dt>
        <dd class="col-sm-9">{{ ad_request.status }}</dd>

        {% if ad_request.acceptedamount %}
        <dt class="col-sm-3">Accepted Amount</dt>
        <dd class="col-sm-9">{{ ad_request.acceptedamount }}</dd>
        {% endif %}

        <dt class="col-sm-3">Messages</dt>
        <dd class="col-sm-9">
            <ul>
            {% for message in messages %}
                <li><strong>{{ message.sender_id }}</strong>: {{ message.message }} <small class="text-muted">{{ message.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</small></li>
            {% endfor %}
            </ul>
        </dd>
    </dl>

    <a href="{{ url_for('messages', ad_request_id=ad_request.ad_request_id) }}" class="btn btn-primary mt-3">View Messages</a>
    {% if ad_request.status != 'Accepted' %}
    <a href="{{ url_for('negotiate', ad_request_id=ad_request.ad_request_id) }}" class="btn btn-warning mt-3">Negotiate</a>
    {% endif %}
</div>
{% endblock %}
